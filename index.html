<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sheeka - Elevate Your Style</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons ac-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #C8797D;
            --secondary-color: #A85F64;
            --tertiary-color: #FDF5E6;
            --general-text-color: #4A4A4A;
            --footer-bg-color: #4A4A4A;
            --footer-text-color: #DDCACA;
            --footer-link-color: #E6B89C;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--tertiary-color); /* Creamy off-white */
            color: var(--general-text-color); /* Dark charcoal */
        }
        .section-fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .section-fade-in.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .animate-slide-in-left {
            animation: slideInLeft 1s ease-out forwards;
        }
        .animate-slide-in-right {
            animation: slideInRight 1s ease-out forwards;
        }
        .animate-fade-in {
            animation: fadeIn 1.5s ease-out forwards;
        }
        /* Added for smooth background image transitions */
        #hero-background {
            transition: background-image 1s ease-in-out, opacity 1s ease-in-out;
        }

        /* Dynamic colors applied using CSS variables */
        .text-primary { color: var(--primary-color); }
        .text-general { color: var(--general-text-color); }
        .bg-primary { background-color: var(--primary-color); }
        .bg-secondary { background-color: var(--secondary-color); }
        .bg-tertiary { background-color: var(--tertiary-color); }
        .hover\:text-primary:hover { color: var(--primary-color); }
        .hover\:bg-secondary:hover { background-color: var(--secondary-color); }
        .focus\:ring-primary:focus { ring-color: var(--primary-color); }
        .focus\:border-primary:focus { border-color: var(--primary-color); }
        
        .footer-bg { background-color: var(--footer-bg-color); }
        .footer-text { color: var(--footer-text-color); }
        .footer-link:hover { color: var(--footer-link-color); }


        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
    </style>
</head>
<body class="overflow-x-hidden">
    <!-- Header -->
    <header class="bg-white shadow-sm py-4 fixed w-full z-50">
        <nav class="container mx-auto px-6 flex justify-between items-center">
            <a href="index.html" id="site-name-header" class="text-3xl font-extrabold text-primary rounded-lg p-2 hover:text-secondary transition duration-300">Sheeka</a>
            <div class="hidden md:flex space-x-8">
                <!-- Navigation links pointing back to index.html with section IDs -->
                <a href="index.html#hero" class="text-general hover:text-primary font-medium transition duration-300 rounded-md p-2">Home</a>
                <a href="index.html#products" class="text-general hover:text-primary font-medium transition duration-300 rounded-md p-2">Products</a>
                <a href="index.html#categories" class="text-general hover:text-primary font-medium transition duration-300 rounded-md p-2">Categories</a>
                <a href="index.html#about" class="text-general hover:text-primary font-medium transition duration-300 rounded-md p-2">About Us</a>
                <a href="index.html#contact" class="text-general hover:text-primary font-medium transition duration-300 rounded-md p-2">Contact</a>
            </div>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden text-general hover:text-primary focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
            </button>
        </nav>
        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu-overlay" class="hidden md:hidden fixed inset-0 bg-black bg-opacity-50 z-40"></div>
        <!-- Mobile Menu Sidebar -->
        <div id="mobile-menu" class="hidden md:hidden fixed inset-y-0 right-0 w-64 bg-white shadow-lg z-50 transform translate-x-full transition-transform duration-300 ease-in-out">
            <div class="p-6">
                <button id="close-mobile-menu" class="absolute top-4 right-4 text-general hover:text-primary focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <nav class="flex flex-col space-y-4 mt-8">
                    <a href="index.html#hero" class="text-gray-800 hover:text-primary font-medium text-lg rounded-md p-2" onclick="closeMobileMenu()">Home</a>
                    <a href="index.html#products" class="text-gray-800 hover:text-primary font-medium text-lg rounded-md p-2" onclick="closeMobileMenu()">Products</a>
                    <a href="index.html#categories" class="text-gray-800 hover:text-primary font-medium text-lg rounded-md p-2" onclick="closeMobileMenu()">Categories</a>
                    <a href="index.html#about" class="text-gray-800 hover:text-primary font-medium text-lg rounded-md p-2" onclick="closeMobileMenu()">About Us</a>
                    <a href="index.html#contact" class="text-gray-800 hover:text-primary font-medium text-lg rounded-md p-2" onclick="closeMobileMenu()">Contact</a>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="hero" class="relative bg-gradient-to-r from-primary to-secondary text-white h-screen flex items-center justify-center text-center overflow-hidden pt-16">
            <!-- Background Shape/Pattern - Purely decorative -->
            <div id="hero-background" class="absolute inset-0 z-0 opacity-10" style="background-size: cover; background-position: center;"></div>
            <div class="relative z-10 p-8 max-w-4xl mx-auto">
                <h1 class="text-5xl md:text-7xl font-extrabold mb-6 leading-tight animate-fade-in">
                    <span id="hero-site-name">Sheeka</span>: <span class="block text-[#E6B89C]" id="hero-slogan">Elevate Your Style</span>
                </h1>
                <p class="text-lg md:text-xl mb-10 opacity-0 animate-slide-in-right" style="animation-delay: 0.5s;">
                    Discover the latest trends and timeless classics that define sophistication and comfort.
                </p>
                <a href="#products" class="inline-block bg-white text-primary hover:bg-gray-100 px-10 py-4 rounded-full text-lg font-semibold shadow-xl transition duration-300 transform hover:scale-105 opacity-0 animate-slide-in-left" style="animation-delay: 1s;">
                    Shop Now
                </a>
            </div>
        </section>

        <!-- Featured Products Section -->
        <section id="products" class="py-16 bg-tertiary section-fade-in">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12 text-general">Featured Products</h2>
                <div id="product-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Products will be dynamically loaded here by JavaScript -->
                    <p class="col-span-full text-center text-gray-500">Loading products...</p>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section id="categories" class="py-16 bg-[#F5F0F0] section-fade-in">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12 text-general">Shop by Category</h2>
                <div id="category-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- Categories will be dynamically loaded here by JavaScript -->
                    <p class="col-span-full text-center text-gray-500">Loading categories...</p>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="py-16 bg-tertiary section-fade-in">
            <div class="container mx-auto px-6 flex flex-col lg:flex-row items-center gap-12">
                <div class="lg:w-1/2">
                    <img id="about-us-image" src="https://placehold.co/800x600/6A5ACD/FFFFFF?text=About+Sheeka" alt="About Us" class="rounded-xl shadow-xl w-full h-auto object-cover transform transition duration-500 hover:scale-105">
                </div>
                <div class="lg:w-1/2 text-center lg:text-left">
                    <h2 class="text-4xl font-bold mb-6 text-general">About Us</h2>
                    <p class="text-lg text-general mb-4 leading-relaxed" id="about-us-text"></p>
                </div>
            </div>
        </section>

        <!-- Call to Action / Newsletter Section -->
        <section class="py-16 bg-gradient-to-r from-secondary to-primary text-white text-center section-fade-in">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold mb-6">Stay Updated with <span id="newsletter-site-name">Sheeka</span>!</h2>
                <p class="text-xl mb-8 opacity-90">
                    Sign up for our newsletter to get exclusive offers, new arrivals, and style tips directly to your inbox.
                </p>
                <form class="max-w-md mx-auto flex flex-col sm:flex-row gap-4">
                    <input type="email" placeholder="Your email address" class="flex-grow p-4 rounded-full text-gray-900 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent transition duration-300 shadow-md" required>
                    <button type="submit" class="bg-white text-primary px-8 py-4 rounded-full font-semibold hover:bg-gray-100 transition duration-300 shadow-lg transform hover:scale-105">
                        Subscribe
                    </button>
                </form>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-16 bg-[#F5F0F0] section-fade-in">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12 text-general">Get in Touch</h2>
                <div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-xl">
                    <form id="contact-form" class="space-y-6">
                        <div>
                            <label for="name" class="block text-lg font-medium text-general mb-2">Name</label>
                            <input type="text" id="name" name="name" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-300" placeholder="Your Name" required>
                        </div>
                        <div>
                            <label for="email" class="block text-lg font-medium text-general mb-2">Email</label>
                            <input type="email" id="email" name="email" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-300" placeholder="your@example.com" required>
                        </div>
                        <div>
                            <label for="message" class="block text-lg font-medium text-general mb-2">Message</label>
                            <textarea id="message" name="message" rows="6" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-300" placeholder="Your message here..." required></textarea>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="bg-primary text-white px-8 py-4 rounded-full font-semibold hover:bg-secondary transition duration-300 shadow-lg transform hover:scale-105">
                                Send Message
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer-bg text-white py-10">
        <div class="container mx-auto px-6 text-center">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <div>
                    <h3 class="text-xl font-bold mb-4" id="footer-site-name">Sheeka</h3>
                    <p class="footer-text" id="footer-slogan">Elevate Your Style</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html#products" class="footer-text hover:footer-link transition duration-300">Products</a></li>
                        <li><a href="index.html#categories" class="footer-text hover:footer-link transition duration-300">Categories</a></li>
                        <li><a href="index.html#about" class="footer-text hover:footer-link transition duration-300">About Us</a></li>
                        <li><a href="index.html#contact" class="footer-text hover:footer-link transition duration-300">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Connect With Us</h3>
                    <div class="flex justify-center space-x-4" id="social-media-links">
                        <!-- Social media icons will be dynamically loaded here -->
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-8 mt-8">
                <p class="footer-text">&copy; 2025 <span id="copyright-site-name">Sheeka</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Message boxes for user feedback -->
    <div id="success-message-box" class="fixed bottom-8 right-8 bg-green-500 text-white px-6 py-3 rounded-lg shadow-xl hidden z-50">
        <!-- Success message here -->
    </div>
    <div id="error-message-box" class="fixed bottom-8 right-8 bg-red-500 text-white px-6 py-3 rounded-lg shadow-xl hidden z-50">
        <!-- Error message here -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Base URL for your backend API
            const BASE_URL = 'https://sheeka.onrender.com';

            // DOM elements
            const siteNameHeader = document.getElementById('site-name-header');
            const heroSiteName = document.getElementById('hero-site-name');
            const heroSlogan = document.getElementById('hero-slogan');
            const aboutUsTextElem = document.getElementById('about-us-text');
            const aboutUsImageElem = document.getElementById('about-us-image'); // New: About Us Image element
            const newsletterSiteName = document.getElementById('newsletter-site-name');
            const footerSiteName = document.getElementById('footer-site-name');
            const footerSlogan = document.getElementById('footer-slogan');
            const copyrightSiteName = document.getElementById('copyright-site-name');
            const socialMediaLinksContainer = document.getElementById('social-media-links');

            const productListContainer = document.getElementById('product-list');
            const categoryListContainer = document.getElementById('category-list');
            const heroBackground = document.getElementById('hero-background');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const closeMobileMenuButton = document.getElementById('close-mobile-menu');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            const fadeInSections = document.querySelectorAll('.section-fade-in');

            // Message box elements
            const successMessageBox = document.getElementById('success-message-box');
            const errorMessageBox = document.getElementById('error-message-box');


            // Variables for hero image carousel
            let promoImagesArray = [];
            let currentPromoImageIndex = 0;
            let heroImageInterval;

            // Helper function to build absolute image URLs
            function buildAbsoluteImageUrl(url) {
                if (!url) return 'https://placehold.co/600x400/EEEEEE/333333?text=No+Image';
                if (url.startsWith('http')) return url; // Already absolute
                return `${BASE_URL}${url}`;
            }

            // Function to display a message to the user
            function showMessage(type, message) {
                const box = type === 'success' ? successMessageBox : errorMessageBox;
                box.textContent = message;
                box.classList.remove('hidden');
                setTimeout(() => {
                    box.classList.add('hidden');
                }, 3000); // Hide after 3 seconds
            }

            // Function to fetch and apply site configuration
            async function fetchSiteConfig() {
                try {
                    const response = await fetch(`${BASE_URL}/api/site-config`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const config = await response.json();
                    console.log("Fetched Site Config:", config); // Log fetched config

                    // Apply general site info
                    if (siteNameHeader) siteNameHeader.textContent = config.siteName;
                    if (heroSiteName) heroSiteName.textContent = config.siteName;
                    if (heroSlogan) heroSlogan.textContent = config.slogan;
                    if (newsletterSiteName) newsletterSiteName.textContent = config.siteName;
                    if (footerSiteName) footerSiteName.textContent = config.siteName;
                    if (footerSlogan) footerSlogan.textContent = config.slogan;
                    if (copyrightSiteName) copyrightSiteName.textContent = config.siteName;
                    
                    // Apply About Us text
                    if (aboutUsTextElem) {
                        // Replace newline characters with <br> for HTML display
                        aboutUsTextElem.innerHTML = config.aboutUsText.replace(/\n/g, '<br>');
                    }

                    // Apply About Us Image
                    if (aboutUsImageElem) {
                        aboutUsImageElem.src = buildAbsoluteImageUrl(config.aboutUsImageUrl || 'https://placehold.co/800x600/6A5ACD/FFFFFF?text=About+Us');
                        aboutUsImageElem.alt = `About Us - ${config.siteName}`; // Dynamic alt text including site name
                    }

                    // Apply colors dynamically via CSS variables
                    const root = document.documentElement;
                    root.style.setProperty('--primary-color', config.primaryColor || '#C8797D');
                    root.style.setProperty('--secondary-color', config.secondaryColor || '#A85F64');
                    root.style.setProperty('--tertiary-color', config.tertiaryColor || '#FDF5E6');
                    root.style.setProperty('--general-text-color', config.generalTextColor || '#4A4A4A');
                    root.style.setProperty('--footer-bg-color', config.footerBgColor || '#4A4A4A');
                    root.style.setProperty('--footer-text-color', config.footerTextColor || '#DDCACA');
                    root.style.setProperty('--footer-link-color', config.footerLinkColor || '#E6B89C');

                    // Apply social media links
                    if (socialMediaLinksContainer) {
                        socialMediaLinksContainer.innerHTML = ''; // Clear existing
                        if (config.socialMediaLinks && Array.isArray(config.socialMediaLinks)) {
                            config.socialMediaLinks.forEach(link => {
                                const a = document.createElement('a');
                                a.href = link.url;
                                a.target = '_blank'; // Open in new tab
                                a.className = 'text-footer-text hover:text-white transition duration-300';
                                a.innerHTML = `<i class="${link.iconClass} w-6 h-6"></i>`;
                                socialMediaLinksContainer.appendChild(a);
                            });
                        }
                    }

                } catch (error) {
                    console.error("Error fetching site configuration:", error);
                    // Fallback to default styles if config fetch fails
                    const root = document.documentElement;
                    root.style.setProperty('--primary-color', '#C8797D');
                    root.style.setProperty('--secondary-color', '#A85F64');
                    root.style.setProperty('--tertiary-color', '#FDF5E6');
                    root.style.setProperty('--general-text-color', '#4A4A4A');
                    root.style.setProperty('--footer-bg-color', '#4A4A4A');
                    root.style.setProperty('--footer-text-color', '#DDCACA');
                    root.style.setProperty('--footer-link-color', '#E6B89C');
                    if (aboutUsTextElem) {
                               aboutUsTextElem.innerHTML = `At <strong class="text-primary">Sheeka</strong>, we believe that fashion is a powerful form of self-expression. Our brand is dedicated to providing high-quality, stylish, and comfortable clothing that empowers you to express your unique personality.

From conceptualization to creation, every piece is crafted with meticulous attention to detail and a passion for design. We're committed to sustainable practices and ethical production, ensuring that your style choices make a positive impact. Join the Sheeka family and redefine your wardrobe.`.replace(/\n/g, '<br>');
                    }
                    if (aboutUsImageElem) {
                        aboutUsImageElem.src = 'https://placehold.co/800x600/6A5ACD/FFFFFF?text=About+Us';
                        aboutUsImageElem.alt = 'About Us';
                    }
                    console.warn("Using default site configuration due to fetch error.");
                }
            }


            // Function to fetch and display products
            async function fetchProducts() {
                try {
                    productListContainer.innerHTML = '<p class="col-span-full text-center text-gray-500">Loading products...</p>';
                    const response = await fetch(`${BASE_URL}/products`);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    
                    const products = await response.json();
                    productListContainer.innerHTML = ''; // Clear loading message

                    if (products.length === 0) {
                        productListContainer.innerHTML = '<p class="col-span-full text-center text-gray-500">No products available right now.</p>';
                        return;
                    }

                    products.forEach(product => {
                        const imageUrl = product.images && product.images.length > 0 
                            ? product.images[0] 
                            : 'https://placehold.co/600x400/EEEEEE/333333?text=No+Image';

                        const productCard = document.createElement('div');
                        productCard.className = 'bg-white rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105';
                        productCard.innerHTML = `
                            <a href="product-details.html?id=${product._id}" class="block">
                                <img src="${imageUrl}" alt="${product.name}" class="w-full h-64 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/EEEEEE/333333?text=Image+Error';">
                                <div class="p-6">
                                    <h3 class="text-xl font-semibold mb-2 text-general">${product.name}</h3>
                                    <p class="text-gray-600 mb-4">${product.description?.substring(0, 100) ?? ''}${product.description?.length > 100 ? '...' : ''}</p>
                                    <div class="flex justify-between items-center">
                                        <span class="text-2xl font-bold text-primary">$${parseFloat(product.price).toFixed(2)}</span>
                                    </div>
                                </div>
                            </a>
                        `;
                        productListContainer.appendChild(productCard);
                    });

                } catch (error) {
                    console.error("Error fetching products:", error);
                    productListContainer.innerHTML = '<p class="col-span-full text-center text-red-500">Failed to load products.</p>';
                }
            }


            // Function to fetch and display categories (collections)
            async function fetchCollections() {
                try {
                    categoryListContainer.innerHTML = '<p class="col-span-full text-center text-gray-500">Loading categories...</p>';
                    const response = await fetch(`${BASE_URL}/products/collections`); 
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const collections = await response.json();

                    categoryListContainer.innerHTML = ''; // Clear loading message

                    if (collections.length === 0) {
                        categoryListContainer.innerHTML = '<p class="col-span-full text-center text-gray-500">No collections available right now. Please check back later!</p>';
                        return;
                    }

                    collections.forEach(collection => {
                        const categoryCard = document.createElement('div');
                        categoryCard.className = 'relative bg-white rounded-xl shadow-lg overflow-hidden group';
                        
                        const thumbnailUrl = buildAbsoluteImageUrl(collection.thumbnailUrl || null);
                        const collectionName = collection.name || 'Untitled Collection';

                        // Updated href to point to collection-details.html with ID
                        categoryCard.innerHTML = `
                            <a href="collection-details.html?id=${collection._id}" class="block">
                                <img src="${thumbnailUrl}" alt="${collectionName}" class="w-full h-48 object-cover group-hover:scale-110 transition duration-500 ease-in-out" onerror="this.onerror=null;this.src='https://placehold.co/600x400/DDA0DD/FFFFFF?text=Image+Error';">
                                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                    <span class="text-white text-2xl font-bold">${collectionName}</span>
                                </div>
                            </a>
                        `;
                        categoryListContainer.appendChild(categoryCard);
                    });
                } catch (error) {
                    console.error("Error fetching collections:", error);
                    categoryListContainer.innerHTML = '<p class="col-span-full text-center text-red-500">Failed to load categories. Please try again later.</p>';
                }
            }

            // Function to change the hero image for carousel
            function changeHeroImage() {
                if (promoImagesArray.length > 0) {
                    const imageUrl = buildAbsoluteImageUrl(promoImagesArray[currentPromoImageIndex]);
                    heroBackground.style.backgroundImage = `url('${imageUrl}')`;
                    heroBackground.style.opacity = '1';
                    currentPromoImageIndex = (currentPromoImageIndex + 1) % promoImagesArray.length;
                }
            }

            // Function to fetch and set hero images for carousel
            async function fetchHeroImagesForCarousel() {
                try {
                    console.log("Attempting to fetch promo images for carousel from:", `${BASE_URL}/products/promo`);
                    const response = await fetch(`${BASE_URL}/products/promo`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const fetchedImages = await response.json();
                    console.log("Fetched promo images (raw data) for carousel:", fetchedImages);

                    if (fetchedImages.length > 0) {
                        promoImagesArray = fetchedImages; // Store fetched images
                        currentPromoImageIndex = 0; // Reset index

                        // Clear any existing interval before starting a new one
                        if (heroImageInterval) {
                            clearInterval(heroImageInterval);
                        }

                        // Display the first image immediately
                        changeHeroImage();

                        // Start carousel if more than one image
                        if (promoImagesArray.length > 1) {
                            heroImageInterval = setInterval(changeHeroImage, 5000); // Change image every 5 seconds
                        }
                    } else {
                        console.warn("No promo images found for the hero section carousel. Using fallback placeholder.");
                        heroBackground.style.backgroundImage = `url('https://placehold.co/1920x1080/c7c7c7/ffffff?text=SHEEKA+COLLECTION+FALLBACK')`; // Fallback placeholder
                        heroBackground.style.opacity = '1';
                    }
                } catch (error) {
                    console.error("Error fetching hero images for carousel:", error);
                    heroBackground.style.backgroundImage = `url('https://placehold.co/1920x1080/FF0000/FFFFFF?text=SHEEKA+IMAGE+LOAD+ERROR')`; // Error placeholder
                    heroBackground.style.opacity = '1';
                }
            }

            // Contact Form Submission
            const contactForm = document.getElementById('contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', async (e) => {
                    e.preventDefault(); // Prevent default form submission

                    const senderName = document.getElementById('name').value;
                    const senderEmail = document.getElementById('email').value;
                    const message = document.getElementById('message').value;

                    // This contact form sends a message from a client to the backend system.
                    // The backend's /api/emails endpoint saves this message to the database.
                    // An administrator can then view these messages in the Flutter app and send replies.
                    // This specific submission does NOT send an outbound email from the server directly.

                    if (!senderName || !senderEmail || !message) {
                        showMessage('error', 'Please fill in all contact form fields (Name, Email, Message).');
                        return;
                    }

                    try {
                        const response = await fetch(`${BASE_URL}/api/emails`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                senderName: senderName,
                                senderEmail: senderEmail,
                                message: message
                            }),
                        });

                        const result = await response.json();

                        if (response.ok) { // Check for 2xx status codes
                            showMessage('success', result.message || 'Your message has been sent successfully!');
                            contactForm.reset(); // Clear the form
                        } else {
                            // Display the specific error message from the backend if available
                            showMessage('error', `Failed to send message: ${result.message || 'Unknown error'}`);
                            console.error('Backend error response:', result); // Log the full error response
                        }
                    } catch (error) {
                        console.error('Network error during contact message submission:', error);
                        showMessage('error', `An error occurred while sending your message: ${error.message}`);
                    }
                });
            }


            // Initial data fetching calls
            fetchSiteConfig(); // Fetch site configuration first
            fetchProducts();
            fetchCollections();
            fetchHeroImagesForCarousel(); // This now handles the carousel

            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

            // Mobile menu toggle
            function openMobileMenu() {
                mobileMenu.classList.remove('translate-x-full');
                mobileMenu.classList.add('translate-x-0');
                mobileMenu.classList.remove('hidden');
                mobileMenuOverlay.classList.remove('hidden');
            }

            function closeMobileMenu() {
                mobileMenu.classList.remove('translate-x-0');
                mobileMenu.classList.add('translate-x-full');
                mobileMenuOverlay.classList.add('hidden');
                // Use a timeout to hide after transition
                setTimeout(() => {
                    mobileMenu.classList.add('hidden');
                }, 300);
            }

            mobileMenuButton.addEventListener('click', openMobileMenu);
            closeMobileMenuButton.addEventListener('click', closeMobileMenu);
            mobileMenuOverlay.addEventListener('click', closeMobileMenu); // Close when clicking outside menu

            // Function to add 'is-visible' class for fade-in effect on scroll
            const observerOptions = {
                root: null, // viewport
                rootMargin: '0px',
                threshold: 0.1 // 10% of section visible
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, observerOptions);

            fadeInSections.forEach(section => {
                observer.observe(section);
            });
        });
    </script>
</body>
</html>
